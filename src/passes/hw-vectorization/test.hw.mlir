module {
  hw.module @simple_vectorization(in %in : i4, out out : i4) {
    %c0_i2 = hw.constant 0 : i2
    %false = hw.constant false
    %c7_i4 = hw.constant 7 : i4
    %c-5_i4 = hw.constant -5 : i4
    %c0_i3 = hw.constant 0 : i3
    %0 = comb.concat %c0_i3, %12 : i3, i1
    %1 = comb.concat %c0_i2, %11, %false : i2, i1, i1
    %2 = comb.or %1, %0 : i4
    %3 = comb.and %2, %c-5_i4 : i4
    %4 = comb.concat %false, %10, %c0_i2 : i1, i1, i2
    %5 = comb.or %4, %3 : i4
    %6 = comb.and %5, %c7_i4 : i4
    %7 = comb.concat %9, %c0_i3 : i1, i3
    %8 = comb.or %7, %6 : i4
    %9 = comb.extract %in from 3 : (i4) -> i1
    %10 = comb.extract %in from 2 : (i4) -> i1
    %11 = comb.extract %in from 1 : (i4) -> i1
    %12 = comb.extract %in from 0 : (i4) -> i1
    hw.output %8 : i4
  }
  hw.module @reverse_endianess_vectorization(in %in : i4, out out : i4) {
    %c0_i2 = hw.constant 0 : i2
    %false = hw.constant false
    %c7_i4 = hw.constant 7 : i4
    %c-5_i4 = hw.constant -5 : i4
    %c0_i3 = hw.constant 0 : i3
    %0 = comb.concat %c0_i3, %12 : i3, i1
    %1 = comb.concat %c0_i2, %11, %false : i2, i1, i1
    %2 = comb.or %1, %0 : i4
    %3 = comb.and %2, %c-5_i4 : i4
    %4 = comb.concat %false, %10, %c0_i2 : i1, i1, i2
    %5 = comb.or %4, %3 : i4
    %6 = comb.and %5, %c7_i4 : i4
    %7 = comb.concat %9, %c0_i3 : i1, i3
    %8 = comb.or %7, %6 : i4
    %9 = comb.extract %in from 0 : (i4) -> i1
    %10 = comb.extract %in from 1 : (i4) -> i1
    %11 = comb.extract %in from 2 : (i4) -> i1
    %12 = comb.extract %in from 3 : (i4) -> i1
    hw.output %8 : i4
  }
  hw.module @bit_mixing_vectorization(in %in2 : i4, in %in : i8, out out2 : i4, out out : i8) {
    %c0_i4 = hw.constant 0 : i4
    %c0_i5 = hw.constant 0 : i5
    %c0_i6 = hw.constant 0 : i6
    %c0_i7 = hw.constant 0 : i7
    %c0_i2 = hw.constant 0 : i2
    %false = hw.constant false
    %c127_i8 = hw.constant 127 : i8
    %c-65_i8 = hw.constant -65 : i8
    %c-33_i8 = hw.constant -33 : i8
    %c-17_i8 = hw.constant -17 : i8
    %c-9_i8 = hw.constant -9 : i8
    %c-5_i8 = hw.constant -5 : i8
    %c7_i4 = hw.constant 7 : i4
    %c-5_i4 = hw.constant -5 : i4
    %c0_i3 = hw.constant 0 : i3
    %0 = comb.concat %c0_i3, %33 : i3, i1
    %1 = comb.concat %c0_i2, %31, %false : i2, i1, i1
    %2 = comb.or %1, %0 : i4
    %3 = comb.and %2, %c-5_i4 : i4
    %4 = comb.concat %false, %32, %c0_i2 : i1, i1, i2
    %5 = comb.or %4, %3 : i4
    %6 = comb.and %5, %c7_i4 : i4
    %7 = comb.concat %30, %c0_i3 : i1, i3
    %8 = comb.or %7, %6 : i4
    %9 = comb.concat %c0_i7, %41 : i7, i1
    %10 = comb.concat %c0_i6, %40, %false : i6, i1, i1
    %11 = comb.or %10, %9 : i8
    %12 = comb.and %11, %c-5_i8 : i8
    %13 = comb.concat %c0_i5, %39, %c0_i2 : i5, i1, i2
    %14 = comb.or %13, %12 : i8
    %15 = comb.and %14, %c-9_i8 : i8
    %16 = comb.concat %c0_i4, %38, %c0_i3 : i4, i1, i3
    %17 = comb.or %16, %15 : i8
    %18 = comb.and %17, %c-17_i8 : i8
    %19 = comb.concat %c0_i3, %37, %c0_i4 : i3, i1, i4
    %20 = comb.or %19, %18 : i8
    %21 = comb.and %20, %c-33_i8 : i8
    %22 = comb.concat %c0_i2, %36, %c0_i5 : i2, i1, i5
    %23 = comb.or %22, %21 : i8
    %24 = comb.and %23, %c-65_i8 : i8
    %25 = comb.concat %false, %35, %c0_i6 : i1, i1, i6
    %26 = comb.or %25, %24 : i8
    %27 = comb.and %26, %c127_i8 : i8
    %28 = comb.concat %34, %c0_i7 : i1, i7
    %29 = comb.or %28, %27 : i8
    %30 = comb.extract %in2 from 0 : (i4) -> i1
    %31 = comb.extract %in2 from 2 : (i4) -> i1
    %32 = comb.extract %in2 from 3 : (i4) -> i1
    %33 = comb.extract %in2 from 1 : (i4) -> i1
    %34 = comb.extract %in from 7 : (i8) -> i1
    %35 = comb.extract %in from 6 : (i8) -> i1
    %36 = comb.extract %in from 4 : (i8) -> i1
    %37 = comb.extract %in from 5 : (i8) -> i1
    %38 = comb.extract %in from 0 : (i8) -> i1
    %39 = comb.extract %in from 3 : (i8) -> i1
    %40 = comb.extract %in from 2 : (i8) -> i1
    %41 = comb.extract %in from 1 : (i8) -> i1
    hw.output %8, %29 : i4, i8
  }
  hw.module @linear_and_reverse(in %in : i8, in %in2 : i4, out out : i8, out out2 : i4) {
    %c0_i4 = hw.constant 0 : i4
    %c0_i3 = hw.constant 0 : i3
    %c0_i5 = hw.constant 0 : i5
    %c0_i2 = hw.constant 0 : i2
    %c0_i6 = hw.constant 0 : i6
    %false = hw.constant false
    %c7_i4 = hw.constant 7 : i4
    %c-5_i4 = hw.constant -5 : i4
    %c127_i8 = hw.constant 127 : i8
    %c-65_i8 = hw.constant -65 : i8
    %c-33_i8 = hw.constant -33 : i8
    %c-17_i8 = hw.constant -17 : i8
    %c-9_i8 = hw.constant -9 : i8
    %c-5_i8 = hw.constant -5 : i8
    %c0_i7 = hw.constant 0 : i7
    %0 = comb.concat %c0_i7, %37 : i7, i1
    %1 = comb.concat %c0_i6, %36, %false : i6, i1, i1
    %2 = comb.or %1, %0 : i8
    %3 = comb.and %2, %c-5_i8 : i8
    %4 = comb.concat %c0_i5, %35, %c0_i2 : i5, i1, i2
    %5 = comb.or %4, %3 : i8
    %6 = comb.and %5, %c-9_i8 : i8
    %7 = comb.concat %c0_i4, %34, %c0_i3 : i4, i1, i3
    %8 = comb.or %7, %6 : i8
    %9 = comb.and %8, %c-17_i8 : i8
    %10 = comb.concat %c0_i3, %33, %c0_i4 : i3, i1, i4
    %11 = comb.or %10, %9 : i8
    %12 = comb.and %11, %c-33_i8 : i8
    %13 = comb.concat %c0_i2, %32, %c0_i5 : i2, i1, i5
    %14 = comb.or %13, %12 : i8
    %15 = comb.and %14, %c-65_i8 : i8
    %16 = comb.concat %false, %31, %c0_i6 : i1, i1, i6
    %17 = comb.or %16, %15 : i8
    %18 = comb.and %17, %c127_i8 : i8
    %19 = comb.concat %30, %c0_i7 : i1, i7
    %20 = comb.or %19, %18 : i8
    %21 = comb.concat %c0_i3, %41 : i3, i1
    %22 = comb.concat %c0_i2, %40, %false : i2, i1, i1
    %23 = comb.or %22, %21 : i4
    %24 = comb.and %23, %c-5_i4 : i4
    %25 = comb.concat %false, %39, %c0_i2 : i1, i1, i2
    %26 = comb.or %25, %24 : i4
    %27 = comb.and %26, %c7_i4 : i4
    %28 = comb.concat %38, %c0_i3 : i1, i3
    %29 = comb.or %28, %27 : i4
    %30 = comb.extract %in from 7 : (i8) -> i1
    %31 = comb.extract %in from 6 : (i8) -> i1
    %32 = comb.extract %in from 5 : (i8) -> i1
    %33 = comb.extract %in from 4 : (i8) -> i1
    %34 = comb.extract %in from 3 : (i8) -> i1
    %35 = comb.extract %in from 2 : (i8) -> i1
    %36 = comb.extract %in from 1 : (i8) -> i1
    %37 = comb.extract %in from 0 : (i8) -> i1
    %38 = comb.extract %in2 from 0 : (i4) -> i1
    %39 = comb.extract %in2 from 1 : (i4) -> i1
    %40 = comb.extract %in2 from 2 : (i4) -> i1
    %41 = comb.extract %in2 from 3 : (i4) -> i1
    hw.output %20, %29 : i8, i4
  }
  hw.module @test_mux(in %a : i4, in %b : i4, in %sel : i1, out result : i4) {
    %c0_i2 = hw.constant 0 : i2
    %false = hw.constant false
    %c7_i4 = hw.constant 7 : i4
    %c-5_i4 = hw.constant -5 : i4
    %true = hw.constant true
    %c0_i3 = hw.constant 0 : i3
    %0 = comb.concat %c0_i3, %29 : i3, i1
    %1 = comb.concat %c0_i2, %24, %false : i2, i1, i1
    %2 = comb.or %1, %0 : i4
    %3 = comb.and %2, %c-5_i4 : i4
    %4 = comb.concat %false, %19, %c0_i2 : i1, i1, i2
    %5 = comb.or %4, %3 : i4
    %6 = comb.and %5, %c7_i4 : i4
    %7 = comb.concat %14, %c0_i3 : i1, i3
    %8 = comb.or %7, %6 : i4
    %9 = comb.extract %a from 3 : (i4) -> i1
    %10 = comb.and %9, %sel : i1
    %11 = comb.extract %b from 3 : (i4) -> i1
    %12 = comb.xor %sel, %true : i1
    %13 = comb.and %11, %12 : i1
    %14 = comb.or %10, %13 : i1
    %15 = comb.extract %a from 2 : (i4) -> i1
    %16 = comb.and %15, %sel : i1
    %17 = comb.extract %b from 2 : (i4) -> i1
    %18 = comb.and %17, %12 : i1
    %19 = comb.or %16, %18 : i1
    %20 = comb.extract %a from 1 : (i4) -> i1
    %21 = comb.and %20, %sel : i1
    %22 = comb.extract %b from 1 : (i4) -> i1
    %23 = comb.and %22, %12 : i1
    %24 = comb.or %21, %23 : i1
    %25 = comb.extract %a from 0 : (i4) -> i1
    %26 = comb.and %25, %sel : i1
    %27 = comb.extract %b from 0 : (i4) -> i1
    %28 = comb.and %27, %12 : i1
    %29 = comb.or %26, %28 : i1
    hw.output %8 : i4
  }
  hw.module @test_and_enable(in %a : i4, in %enable : i1, out o : i4) {
    %c0_i2 = hw.constant 0 : i2
    %false = hw.constant false
    %c7_i4 = hw.constant 7 : i4
    %c-5_i4 = hw.constant -5 : i4
    %c0_i3 = hw.constant 0 : i3
    %0 = comb.concat %c0_i3, %16 : i3, i1
    %1 = comb.concat %c0_i2, %14, %false : i2, i1, i1
    %2 = comb.or %1, %0 : i4
    %3 = comb.and %2, %c-5_i4 : i4
    %4 = comb.concat %false, %12, %c0_i2 : i1, i1, i2
    %5 = comb.or %4, %3 : i4
    %6 = comb.and %5, %c7_i4 : i4
    %7 = comb.concat %10, %c0_i3 : i1, i3
    %8 = comb.or %7, %6 : i4
    %9 = comb.extract %a from 3 : (i4) -> i1
    %10 = comb.and %9, %enable : i1
    %11 = comb.extract %a from 2 : (i4) -> i1
    %12 = comb.and %11, %enable : i1
    %13 = comb.extract %a from 1 : (i4) -> i1
    %14 = comb.and %13, %enable : i1
    %15 = comb.extract %a from 0 : (i4) -> i1
    %16 = comb.and %15, %enable : i1
    hw.output %8 : i4
  }
  hw.module @test_multiple_patterns(in %a : i4, in %b : i4, in %c : i4, out out_xor : i4, out out_and : i4) {
    %c0_i2 = hw.constant 0 : i2
    %false = hw.constant false
    %c7_i4 = hw.constant 7 : i4
    %c-5_i4 = hw.constant -5 : i4
    %c0_i3 = hw.constant 0 : i3
    %0 = comb.concat %c0_i3, %29 : i3, i1
    %1 = comb.concat %c0_i2, %26, %false : i2, i1, i1
    %2 = comb.or %1, %0 : i4
    %3 = comb.and %2, %c-5_i4 : i4
    %4 = comb.concat %false, %23, %c0_i2 : i1, i1, i2
    %5 = comb.or %4, %3 : i4
    %6 = comb.and %5, %c7_i4 : i4
    %7 = comb.concat %20, %c0_i3 : i1, i3
    %8 = comb.or %7, %6 : i4
    %9 = comb.concat %c0_i3, %37 : i3, i1
    %10 = comb.concat %c0_i2, %35, %false : i2, i1, i1
    %11 = comb.or %10, %9 : i4
    %12 = comb.and %11, %c-5_i4 : i4
    %13 = comb.concat %false, %33, %c0_i2 : i1, i1, i2
    %14 = comb.or %13, %12 : i4
    %15 = comb.and %14, %c7_i4 : i4
    %16 = comb.concat %31, %c0_i3 : i1, i3
    %17 = comb.or %16, %15 : i4
    %18 = comb.extract %a from 3 : (i4) -> i1
    %19 = comb.extract %b from 3 : (i4) -> i1
    %20 = comb.xor %18, %19 : i1
    %21 = comb.extract %a from 2 : (i4) -> i1
    %22 = comb.extract %b from 2 : (i4) -> i1
    %23 = comb.xor %21, %22 : i1
    %24 = comb.extract %a from 1 : (i4) -> i1
    %25 = comb.extract %b from 1 : (i4) -> i1
    %26 = comb.xor %24, %25 : i1
    %27 = comb.extract %a from 0 : (i4) -> i1
    %28 = comb.extract %b from 0 : (i4) -> i1
    %29 = comb.xor %27, %28 : i1
    %30 = comb.extract %c from 3 : (i4) -> i1
    %31 = comb.and %18, %30 : i1
    %32 = comb.extract %c from 2 : (i4) -> i1
    %33 = comb.and %21, %32 : i1
    %34 = comb.extract %c from 1 : (i4) -> i1
    %35 = comb.and %24, %34 : i1
    %36 = comb.extract %c from 0 : (i4) -> i1
    %37 = comb.and %27, %36 : i1
    hw.output %8, %17 : i4, i4
  }
  hw.module @test_add(in %a : i4, in %b : i4, out o : i4) {
    %c0_i2 = hw.constant 0 : i2
    %false = hw.constant false
    %c7_i4 = hw.constant 7 : i4
    %c-5_i4 = hw.constant -5 : i4
    %c0_i3 = hw.constant 0 : i3
    %0 = comb.concat %c0_i3, %20 : i3, i1
    %1 = comb.concat %c0_i2, %17, %false : i2, i1, i1
    %2 = comb.or %1, %0 : i4
    %3 = comb.and %2, %c-5_i4 : i4
    %4 = comb.concat %false, %14, %c0_i2 : i1, i1, i2
    %5 = comb.or %4, %3 : i4
    %6 = comb.and %5, %c7_i4 : i4
    %7 = comb.concat %11, %c0_i3 : i1, i3
    %8 = comb.or %7, %6 : i4
    %9 = comb.extract %a from 3 : (i4) -> i1
    %10 = comb.extract %b from 3 : (i4) -> i1
    %11 = comb.add %9, %10 : i1
    %12 = comb.extract %a from 2 : (i4) -> i1
    %13 = comb.extract %b from 2 : (i4) -> i1
    %14 = comb.add %12, %13 : i1
    %15 = comb.extract %a from 1 : (i4) -> i1
    %16 = comb.extract %b from 1 : (i4) -> i1
    %17 = comb.add %15, %16 : i1
    %18 = comb.extract %a from 0 : (i4) -> i1
    %19 = comb.extract %b from 0 : (i4) -> i1
    %20 = comb.add %18, %19 : i1
    hw.output %8 : i4
  }
  hw.module @CustomLogic(in %a : i8, in %b : i8, out out : i8) {
    %c0_i4 = hw.constant 0 : i4
    %c0_i3 = hw.constant 0 : i3
    %c0_i5 = hw.constant 0 : i5
    %c0_i2 = hw.constant 0 : i2
    %c0_i6 = hw.constant 0 : i6
    %false = hw.constant false
    %c127_i8 = hw.constant 127 : i8
    %c-65_i8 = hw.constant -65 : i8
    %c-33_i8 = hw.constant -33 : i8
    %c-17_i8 = hw.constant -17 : i8
    %c-9_i8 = hw.constant -9 : i8
    %c-5_i8 = hw.constant -5 : i8
    %true = hw.constant true
    %c0_i7 = hw.constant 0 : i7
    %0 = comb.concat %c0_i7, %25 : i7, i1
    %1 = comb.concat %c0_i6, %30, %false : i6, i1, i1
    %2 = comb.or %1, %0 : i8
    %3 = comb.and %2, %c-5_i8 : i8
    %4 = comb.concat %c0_i5, %35, %c0_i2 : i5, i1, i2
    %5 = comb.or %4, %3 : i8
    %6 = comb.and %5, %c-9_i8 : i8
    %7 = comb.concat %c0_i4, %40, %c0_i3 : i4, i1, i3
    %8 = comb.or %7, %6 : i8
    %9 = comb.and %8, %c-17_i8 : i8
    %10 = comb.concat %c0_i3, %45, %c0_i4 : i3, i1, i4
    %11 = comb.or %10, %9 : i8
    %12 = comb.and %11, %c-33_i8 : i8
    %13 = comb.concat %c0_i2, %50, %c0_i5 : i2, i1, i5
    %14 = comb.or %13, %12 : i8
    %15 = comb.and %14, %c-65_i8 : i8
    %16 = comb.concat %false, %55, %c0_i6 : i1, i1, i6
    %17 = comb.or %16, %15 : i8
    %18 = comb.and %17, %c127_i8 : i8
    %19 = comb.concat %60, %c0_i7 : i1, i7
    %20 = comb.or %19, %18 : i8
    %21 = comb.extract %a from 0 : (i8) -> i1
    %22 = comb.extract %b from 0 : (i8) -> i1
    %23 = comb.and %21, %22 : i1
    %24 = comb.xor %21, %true : i1
    %25 = comb.or %23, %24 : i1
    %26 = comb.extract %a from 1 : (i8) -> i1
    %27 = comb.extract %b from 1 : (i8) -> i1
    %28 = comb.and %26, %27 : i1
    %29 = comb.xor %26, %true : i1
    %30 = comb.or %28, %29 : i1
    %31 = comb.extract %a from 2 : (i8) -> i1
    %32 = comb.extract %b from 2 : (i8) -> i1
    %33 = comb.and %31, %32 : i1
    %34 = comb.xor %31, %true : i1
    %35 = comb.or %33, %34 : i1
    %36 = comb.extract %a from 3 : (i8) -> i1
    %37 = comb.extract %b from 3 : (i8) -> i1
    %38 = comb.and %36, %37 : i1
    %39 = comb.xor %36, %true : i1
    %40 = comb.or %38, %39 : i1
    %41 = comb.extract %a from 4 : (i8) -> i1
    %42 = comb.extract %b from 4 : (i8) -> i1
    %43 = comb.and %41, %42 : i1
    %44 = comb.xor %41, %true : i1
    %45 = comb.or %43, %44 : i1
    %46 = comb.extract %a from 5 : (i8) -> i1
    %47 = comb.extract %b from 5 : (i8) -> i1
    %48 = comb.and %46, %47 : i1
    %49 = comb.xor %46, %true : i1
    %50 = comb.or %48, %49 : i1
    %51 = comb.extract %a from 6 : (i8) -> i1
    %52 = comb.extract %b from 6 : (i8) -> i1
    %53 = comb.and %51, %52 : i1
    %54 = comb.xor %51, %true : i1
    %55 = comb.or %53, %54 : i1
    %56 = comb.extract %a from 7 : (i8) -> i1
    %57 = comb.extract %b from 7 : (i8) -> i1
    %58 = comb.and %56, %57 : i1
    %59 = comb.xor %56, %true : i1
    %60 = comb.or %58, %59 : i1
    hw.output %20 : i8
  }
  hw.module @GatedXOR(in %a : i4, in %b : i4, in %enable : i1, out out : i4) {
    %c0_i2 = hw.constant 0 : i2
    %false = hw.constant false
    %c7_i4 = hw.constant 7 : i4
    %c-5_i4 = hw.constant -5 : i4
    %c0_i3 = hw.constant 0 : i3
    %0 = comb.concat %c0_i3, %12 : i3, i1
    %1 = comb.concat %c0_i2, %16, %false : i2, i1, i1
    %2 = comb.or %1, %0 : i4
    %3 = comb.and %2, %c-5_i4 : i4
    %4 = comb.concat %false, %20, %c0_i2 : i1, i1, i2
    %5 = comb.or %4, %3 : i4
    %6 = comb.and %5, %c7_i4 : i4
    %7 = comb.concat %24, %c0_i3 : i1, i3
    %8 = comb.or %7, %6 : i4
    %9 = comb.extract %a from 0 : (i4) -> i1
    %10 = comb.extract %b from 0 : (i4) -> i1
    %11 = comb.xor %9, %10 : i1
    %12 = comb.and %11, %enable : i1
    %13 = comb.extract %a from 1 : (i4) -> i1
    %14 = comb.extract %b from 1 : (i4) -> i1
    %15 = comb.xor %13, %14 : i1
    %16 = comb.and %15, %enable : i1
    %17 = comb.extract %a from 2 : (i4) -> i1
    %18 = comb.extract %b from 2 : (i4) -> i1
    %19 = comb.xor %17, %18 : i1
    %20 = comb.and %19, %enable : i1
    %21 = comb.extract %a from 3 : (i4) -> i1
    %22 = comb.extract %b from 3 : (i4) -> i1
    %23 = comb.xor %21, %22 : i1
    %24 = comb.and %23, %enable : i1
    hw.output %8 : i4
  }
  hw.module @bit_drop(in %in : i4, out out : i4) {
    %c0_i3 = hw.constant 0 : i3
    %c7_i4 = hw.constant 7 : i4
    %c0_i2 = hw.constant 0 : i2
    %false = hw.constant false
    %0 = comb.concat %c0_i2, %8, %false : i2, i1, i1
    %1 = comb.concat %false, %7, %c0_i2 : i1, i1, i2
    %2 = comb.or %1, %0 : i4
    %3 = comb.and %2, %c7_i4 : i4
    %4 = comb.concat %6, %c0_i3 : i1, i3
    %5 = comb.or %4, %3 : i4
    %6 = comb.extract %in from 3 : (i4) -> i1
    %7 = comb.extract %in from 2 : (i4) -> i1
    %8 = comb.extract %in from 1 : (i4) -> i1
    hw.output %5 : i4
  }
  hw.module @bit_duplicate(in %in : i4, out out : i4) {
    %c0_i2 = hw.constant 0 : i2
    %false = hw.constant false
    %c7_i4 = hw.constant 7 : i4
    %c-5_i4 = hw.constant -5 : i4
    %c0_i3 = hw.constant 0 : i3
    %0 = comb.concat %c0_i3, %11 : i3, i1
    %1 = comb.concat %c0_i2, %11, %false : i2, i1, i1
    %2 = comb.or %1, %0 : i4
    %3 = comb.and %2, %c-5_i4 : i4
    %4 = comb.concat %false, %10, %c0_i2 : i1, i1, i2
    %5 = comb.or %4, %3 : i4
    %6 = comb.and %5, %c7_i4 : i4
    %7 = comb.concat %9, %c0_i3 : i1, i3
    %8 = comb.or %7, %6 : i4
    %9 = comb.extract %in from 3 : (i4) -> i1
    %10 = comb.extract %in from 2 : (i4) -> i1
    %11 = comb.extract %in from 0 : (i4) -> i1
    hw.output %8 : i4
  }
  hw.module @mixed_sources(in %in1 : i4, in %in2 : i4, out out : i8) {
    %c0_i4 = hw.constant 0 : i4
    %0 = comb.concat %c0_i4, %in2 : i4, i4
    %1 = comb.concat %in1, %c0_i4 : i4, i4
    %2 = comb.or %1, %0 : i8
    hw.output %2 : i8
  }
  hw.module @with_logic_gate(in %in : i4, out out : i4) {
    %c0_i2 = hw.constant 0 : i2
    %false = hw.constant false
    %c7_i4 = hw.constant 7 : i4
    %c-5_i4 = hw.constant -5 : i4
    %c0_i3 = hw.constant 0 : i3
    %0 = comb.concat %c0_i3, %13 : i3, i1
    %1 = comb.concat %c0_i2, %11, %false : i2, i1, i1
    %2 = comb.or %1, %0 : i4
    %3 = comb.and %2, %c-5_i4 : i4
    %4 = comb.concat %false, %10, %c0_i2 : i1, i1, i2
    %5 = comb.or %4, %3 : i4
    %6 = comb.and %5, %c7_i4 : i4
    %7 = comb.concat %9, %c0_i3 : i1, i3
    %8 = comb.or %7, %6 : i4
    %9 = comb.extract %in from 3 : (i4) -> i1
    %10 = comb.extract %in from 2 : (i4) -> i1
    %11 = comb.extract %in from 1 : (i4) -> i1
    %12 = comb.extract %in from 0 : (i4) -> i1
    %13 = comb.xor %11, %12 : i1
    hw.output %8 : i4
  }
}
